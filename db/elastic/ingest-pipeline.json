{
  "description": "Normalize timestamp, add processed_at, uppercase message",
  "processors": [
    {
      "date": {
        "field": "timestamp",
        "target_field": "timestamp",
        "formats": ["ISO8601", "yyyy-MM-dd'T'HH:mm:ss.SSSX", "yyyy-MM-dd HH:mm:ss", "yyyy-MM-dd"],
        "ignore_failure": true
      }
    },
    { "set": { "field": "processed_at", "value": "{{_ingest.timestamp}}" } },
    { "uppercase": { "field": "message", "ignore_missing": true } }
  ]
}
